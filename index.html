<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CRASH23ROOM</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
          .catch(err => console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', err));
      });
    }
  </script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background: url('https://images.unsplash.com/photo-1617957741565-18e92e2ad1a3?auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }
    header {
      text-align: center;
      margin-bottom: 1rem;
    }
    .logo {
      width: 100px;
      border-radius: 50%;
    }
    .section {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    button {
      background: #e63946;
      color: white;
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .points {
      font-size: 1.2rem;
      margin: 0.5rem 0;
    }
    .object-box {
      width: 100%;
      height: 250px;
      background: #222;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .object-box img {
      height: 200px;
      transition: transform 0.1s;
    }
    .progress-bar {
      width: 100%;
      height: 8px;
      background: #555;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 10px;
    }
    .progress-fill {
      height: 100%;
      background: #76ff03;
      transition: width 0.2s;
    }
    .flash {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.5);
      animation: flash 0.2s ease-in-out;
      pointer-events: none;
    }
    @keyframes flash {
      0% { opacity: 0.7; }
      100% { opacity: 0; }
    }
    .plus-one {
      position: absolute;
      font-size: 2rem;
      color: yellow;
      animation: rise 0.6s ease-out forwards;
    }
    @keyframes rise {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-50px); }
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      margin: 0.3rem 0;
      border-radius: 6px;
      border: none;
    }
    .telegram-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #229ED9;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      cursor: pointer;
    }
    .telegram-btn img {
      width: 24px;
      height: 24px;
    }
  </style>
</head>
<body>
  <header>
    <img src="icons/icon-192.png" alt="logo" class="logo" />
    <h1>CRASH23ROOM</h1>
    <p>–¶–∏—Ñ—Ä–æ–≤–æ–π –∞–Ω—Ç–∏—Å—Ç—Ä–µ—Å—Å –∏ —Ä–µ–∞–ª—å–Ω—ã–π —ç–∫—à–Ω</p>
  </header>

  <div class="section">
    <h2>üéÆ –£–Ω–∏—á—Ç–æ–∂–∞–π –ø—Ä–µ–¥–º–µ—Ç—ã</h2>
    <div class="object-box" onclick="hitObject()">
      <img id="object-img" src="" alt="object" />
    </div>
    <div class="progress-bar"><div class="progress-fill" id="health-bar"></div></div>
    <div class="points">–û—á–∫–æ–≤: <span id="points">0</span> | –†–∞–∑–±–∏—Ç–æ: <span id="destroyed">0</span></div>
  </div>

  <div class="section">
    <h2>üìà –£—Ä–æ–≤–µ–Ω—å</h2>
    <p>–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></p>
  </div>

  <div class="section">
    <h2>üéØ –ú–æ–∏ –±–æ–Ω—É—Å—ã / —Ü–µ–ª–∏</h2>
    <p>1000 –æ—á–∫–æ–≤ ‚Äî –º–µ—Ä—á –≤ –ø–æ–¥–∞—Ä–æ–∫</p>
    <button onclick="resetPoints()">–°–±—Ä–æ—Å–∏—Ç—å –æ—á–∫–∏</button>
  </div>

  <div class="section">
    <h2>üìÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å CRASH-ROOM</h2>
    <form action="https://ce34133a-026a-4462-b5b8-33a60a56dc76-00-mmzw9y2di0b5.spock.replit.dev/send" method="POST">
      <label>–ü–∞–∫–µ—Ç</label>
      <select name="–ü–∞–∫–µ—Ç">
        <option>Light</option>
        <option>Medium</option>
        <option>Hardcore</option>
      </select>
      <label>–î–∞—Ç–∞</label>
      <input type="date" name="–î–∞—Ç–∞" required />
      <label>–í—Ä–µ–º—è</label>
      <input type="time" name="–í—Ä–µ–º—è" required />
      <label>–í–∞—à–µ –∏–º—è</label>
      <input type="text" name="–ò–º—è" required />
      <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
      <input type="tel" name="–¢–µ–ª–µ—Ñ–æ–Ω" required />
      <button type="submit">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
    </form>
  </div>

  <div class="section">
    <h2>üéÅ –ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
    <p>–§—É—Ç–±–æ–ª–∫–∞ —Å –º–µ—Ä—á–µ–º ‚Äî 1000 –æ—á–∫–æ–≤</p>
    <button disabled>–ü–æ–ª—É—á–∏—Ç—å (—Å–∫–æ—Ä–æ)</button>
  </div>

  <div class="section">
    <h2>üì¢ –ù–æ–≤–æ—Å—Ç–∏ –∏ –∞–∫—Ü–∏–∏</h2>
    <p>–°–∫–æ—Ä–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã –≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ!</p>
  </div>

  <a href="https://t.me/crash23room" class="telegram-btn" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram" />
  </a>

  <audio id="hitSound" src="https://assets.mixkit.co/sfx/download/mixkit-glass-break-impact-768.wav"></audio>

  <script>
    let points = parseInt(localStorage.getItem("points")) || 0;
    let destroyed = parseInt(localStorage.getItem("destroyed")) || 0;
    let level = Math.floor(destroyed / 10) + 1;

    document.getElementById("points").innerText = points;
    document.getElementById("destroyed").innerText = destroyed;
    document.getElementById("level").innerText = level;

    const objects = Array.from({length: 10}).map((_, i) => {
      const hits = Math.floor(Math.random() * 3) + 2;
      const images = Array.from({length: hits}).map((_, j) => `https://dummyimage.com/300x200/222/fff&text=Obj${i+1}+${j+1}`);
      images.push("https://dummyimage.com/300x200/880000/fff&text=–†–∞–∑–±–∏—Ç–æ!");
      return {
        name: `object${i+1}`,
        hitsRequired: hits,
        images: images
      };
    });

    let current = {
      index: 0,
      hit: 0
    };

    function loadNewObject() {
      current.index = Math.floor(Math.random() * objects.length);
      current.hit = 0;
      const obj = objects[current.index];
      document.getElementById("object-img").src = obj.images[0];
      updateHealthBar();
    }

    function hitObject() {
      const obj = objects[current.index];
      if (current.hit < obj.hitsRequired) {
        current.hit++;
        playHitSound();
        showFlash();
        showPlusOne();
        if (current.hit >= obj.hitsRequired) {
          points++;
          destroyed++;
          localStorage.setItem("points", points);
          localStorage.setItem("destroyed", destroyed);
          document.getElementById("points").innerText = points;
          document.getElementById("destroyed").innerText = destroyed;
          level = Math.floor(destroyed / 10) + 1;
          document.getElementById("level").innerText = level;
          loadNewObject();
        } else {
          document.getElementById("object-img").src = obj.images[current.hit];
        }
        updateHealthBar();
      }
    }

    function updateHealthBar() {
      const obj = objects[current.index];
      const health = ((obj.hitsRequired - current.hit) / obj.hitsRequired) * 100;
      document.getElementById("health-bar").style.width = health + "%";
    }

    function resetPoints() {
      points = 0;
      destroyed = 0;
      level = 1;
      localStorage.setItem("points", points);
      localStorage.setItem("destroyed", destroyed);
      document.getElementById("points").innerText = points;
      document.getElementById("destroyed").innerText = destroyed;
      document.getElementById("level").innerText = level;
    }

    function playHitSound() {
      const sound = document.getElementById("hitSound");
      sound.currentTime = 0;
      sound.play();
    }

    function showFlash() {
      const box = document.querySelector(".object-box");
      const flash = document.createElement("div");
      flash.className = "flash";
      box.appendChild(flash);
      setTimeout(() => flash.remove(), 200);
    }

    function showPlusOne() {
      const box = document.querySelector(".object-box");
      const plus = document.createElement("div");
      plus.className = "plus-one";
      plus.style.left = Math.random() * 60 + 20 + "%";
      plus.style.top = Math.random() * 20 + 40 + "%";
      plus.innerText = "+1";
      box.appendChild(plus);
      setTimeout(() => plus.remove(), 600);
    }

    window.onload = loadNewObject;
  </script>
</body>
</html>


